import java.util.Scanner;
import usuarios.CtrDomUsr;

public class CtrPresUser {
	
	private Scanner input;
	private CtrDomUsr cu;
	
	public static final int OP_MODUS = 1;
	public static final int OP_MODPASS = 2;
	public static final int OP_BORCU = 3;
	public static final int OP_LOGOUT = 4;
	
	public CtrPresUser() {
		cu = new CtrDomUsr();
	}
	
	public void setInput(Scanner input) {
		this.input = input;
	}
	
	public void login() {
		System.out.println("Login:");
		System.out.println("Escribe tu nombre de usuario:");
		String u = input.next();

		System.out.println("Escribe tu password:");
		String p = input.next();
		
		if (cu.isUser1(u, p, false)){
			System.out.println("Login correcto, por favor, seleccione una opcion");
		}
		else {
			System.out.println("Login incorrecto, por favor, vuelva a introducir sus datos:");
			login();
		}
	}
	
	public void register() {
		System.out.println("Registro:");
		System.out.println("Escribe tu nombre de usuario:");
		String u = input.next();
		System.out.println("Escribe tu password:");
		String p = input.next();
		System.out.println("Confirma tu password:");
		String p2 = input.next();
		if(p.equals(p2) & !cu.isUser1(u,p,true)) {
			cu.addUser1(u, p);
		}
		else {
			System.out.println("Las password no coinciden o el nombre de usuario ya existe.");
			System.out.println("Por favor, vuelve a intentarlo:");
			register();
		}
	}
	
	public void logout() {
		input.close();
	}
	
	public void usrs(){
		System.out.println("Gestionar Cuenta:");
		System.out.println("Escribe tu nombre de usuario:");
		String u = input.next();
		System.out.println("Escribe tu password:");
		String p = input.next();
		
		System.out.println("Acceso correcto. Indique que quiere hacer:");
		System.out.println(OP_MODUS + ". Modificar su nombre de usuario");
		System.out.println(OP_MODPASS + ". Modificar su contraseña");
		System.out.println(OP_BORCU + ". Borrar Cuenta");
		System.out.println(OP_LOGOUT + ". Salir al menu principal");
		
		int op = input.nextInt();
		
		switch (op) {
		case OP_MODUS:
			System.out.println("Modificar Nombre de Usuario:");
			modUs();
			break;
			
		case OP_MODPASS:
			System.out.println("Modificar Contraseña:");
			modPass();
			break;
			
		case OP_BORCU:
			System.out.println("Borrar Cuenta:");
			borrCu();
			break;
			
		case OP_LOGOUT:
			System.out.println("Volviendo al menu de inicio...");
			break;
			
		default:
			System.out.println("Opcion incorrecta");
			break;
		}
	}
	
	public void modUs(){
		System.out.println("Escribe el nombre de usuario actual:");
		String u = input.next();
		System.out.println("Escribe su nuevo nombre:");
		String u2 = input.next();
		if (!cu.isUser1(u2,u,true)){
			cu.modUs2(u,u2);
		}else {
			System.out.println("El nombre de usuario ya existe. Por favor, vuelve a intentarlo:");
			modUs();
		}
	}
	
	public void modPass(){
		
	}
	
	public void borrCu(){
		
	}
}
